
[[TOC]]

## 决策单调性

```
------j-------i------x----y-----
```

::: colorfulbox

定义1: $f(i)$

在一个数轴上$1 \leqslant j< i$,有一个函数$G(j,i)$,表示$j$对$i$的贡献,其中最优值,称为$f(i)$.

$$
f(i) = \max_{j =i}^{i} G(j,i)
$$。

:::


::: colorfulbox

定义2: 决策单调性

对于$1 \leqslant j< i < x < y$,若$G(i,x)$优于$G(j,i)$,那么对于$y > x$,都有$G(i,y)$ 优于 $G(j,y)$。


另一种说法: 若$i$对于$x$的贡献优于$j$对于$x$的贡献且$j < i$,那么对于任意的$y>x$,$i$对于$y$的贡献也优于$j$对于$y$的贡献。这种性质我们称为++决策单调性++。

:::


::: colorfulbox

推论1: $p[x]$ 存在性

对于$i \in [1,x-1]$,其中使得$G(i,x)$最优的点$i$为最优决策点。记此时的最优$G(i,x)$值为$f(x)$. 可以想到最优决策点必然存在. 

那么设$p[x]$表示最优$G(i,x)$的$i$值,++也称$x$的决策点++,记$p[x] = i$

:::

::: colorfulbox

推论2: 决策点数组单调不减


若$G(i,x)$满足决策单调性, 那么$p$数组是单调不减的,即

1. 任意两个相邻值,满足: $p[x] \leqslant p[x+1]$。
2. 任意两个值$x,y$,$x < y \Rightarrow p[x] \leqslant p[y]$

:::


证明,使用反证法.



设: $p[x] > p[y], x < y$,这种情况存在.

```
--p[y]-- p[x] --x--y--
```

因为$p[x]$是$x$的最优决策点. 设$p[x] = i$,则由定义知: $\forall j \in [1,x-1]$,$G(i,x)$都要优于$G(j,x)$.
又因为$p[x] > p[y]$.所以$p[x]$对于$y$的贡献应该优于$p[y]$对于$y$的贡献.
所以$y$的$p$值不应该选择$p[y]$,至少应该选$p[x]$,与假设矛盾.所以假设的情况不可以出现.

证明完毕.


::: colorfulbox

推论3: 决策点后续影响

对于每一个决策点$a$,都有一个区间$[i,j]$或空集,使得$x \in [i,j]$时,$p(x)$的决策点都是$a$.这些区间的任意两个不会相交(这个应该是不对的,应该可以相交,当有多个点都是最优决策点的时候.)

:::

证明:

a 要么是最优决策点,要么不是最优决策点.



::: colorfulbox

推论4: 决策点后续影响具有二分性

对于每一个决策点$a$,都有一个区间$[i,j]$或空集,使得$x \in [i,j]$时,$p(x)$的决策点都是$a$.这些区间的任意两个不会相交(这个应该是不对的,应该可以相交,当有多个点都是最优决策点的时候.)

:::


## 操作1:

一个满足决策单调性的的DP方程,他的时间复杂度是$O(nlogn)$

后缀更新操作.

2. 证明$nlog(n)$

## 时间复杂度

队列或栈内的元素只入栈出栈一次,所以这里的时间就要看最多有多少个元素能入栈

可以想到:

1. 刚开始把0点入栈,
2. 接着$f(1)$产生的点入栈,此时最多有两个点在栈内,产生一个新的点
3. 接着$f(2)$产生的点入栈,此时最多有三个点在栈内,产生一个新的点
4. $\cdots$

发生每一次产生一个新的点入栈,那么最多产生$n$个点

所以最后的时间为$O(n \times logn \times logn + n) \approx n(logn)^2$

## 相关题目

+p THIS_ID
